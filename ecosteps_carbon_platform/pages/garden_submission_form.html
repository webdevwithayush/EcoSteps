<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Garden Submission Form - EcoSteps</title>
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Fecostepsc3183back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.5"></script>
</head>
<body class="bg-background min-h-screen font-source-sans">
    <!-- Header -->
    <header class="bg-surface shadow-soft border-b border-gray-100 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center">
                    <svg class="h-8 w-8 text-primary mr-3" viewBox="0 0 32 32" fill="currentColor">
                        <path d="M16 2L8 8v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V8l-8-6z"/>
                        <path d="M12 14l3 3 6-6" stroke="white" stroke-width="2" fill="none"/>
                    </svg>
                    <span class="text-xl font-inter font-bold text-primary">EcoSteps</span>
                </div>
                
                <!-- Navigation Links -->
                <nav class="hidden md:flex space-x-8">
                    <a href="garden_owner_dashboard.html" class="text-text-secondary hover:text-primary transition-smooth">Dashboard</a>
                    <a href="ngo_carbon_credits_marketplace.html" class="text-text-secondary hover:text-primary transition-smooth">Marketplace</a>
                    <a href="user_profile_account_settings.html" class="text-text-secondary hover:text-primary transition-smooth">Profile</a>
                </nav>

                <!-- Mobile Menu Button -->
                <button class="md:hidden p-2 rounded-lg text-text-secondary hover:text-primary hover:bg-gray-50 transition-smooth" id="mobileMenuBtn">
                    <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                    </svg>
                </button>
            </div>

            <!-- Mobile Menu -->
            <div class="md:hidden hidden border-t border-gray-100 py-4" id="mobileMenu">
                <div class="space-y-2">
                    <a href="garden_owner_dashboard.html" class="block px-4 py-2 text-text-secondary hover:text-primary hover:bg-gray-50 rounded-lg transition-smooth">Dashboard</a>
                    <a href="ngo_carbon_credits_marketplace.html" class="block px-4 py-2 text-text-secondary hover:text-primary hover:bg-gray-50 rounded-lg transition-smooth">Marketplace</a>
                    <a href="user_profile_account_settings.html" class="block px-4 py-2 text-text-secondary hover:text-primary hover:bg-gray-50 rounded-lg transition-smooth">Profile</a>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Indicator -->
    <div class="bg-surface border-b border-gray-100">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex items-center justify-between mb-2">
                <h1 class="text-lg font-inter font-semibold text-text-primary">Submit Your Garden</h1>
                <span class="text-sm text-text-secondary">Step <span id="currentStep">1</span> of 4</span>
            </div>
            
            <!-- Progress Bar -->
            <div class="w-full bg-gray-200 rounded-full h-2">
                <div id="progressBar" class="bg-primary h-2 rounded-full transition-smooth" style="width: 25%"></div>
            </div>
            
            <!-- Step Labels -->
            <div class="flex justify-between mt-3 text-xs text-text-secondary">
                <span class="step-label active" data-step="1">Garden Details</span>
                <span class="step-label" data-step="2">Tree Information</span>
                <span class="step-label" data-step="3">Equipment</span>
                <span class="step-label" data-step="4">Review</span>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <form id="gardenSubmissionForm" class="space-y-8">
            <!-- Step 1: Garden Details -->
            <div id="step1" class="form-step">
                <div class="bg-surface rounded-2xl shadow-organic p-6 lg:p-8">
                    <div class="mb-8">
                        <h2 class="text-2xl font-inter font-bold text-text-primary mb-2">Garden Details</h2>
                        <p class="text-text-secondary">Tell us about your garden's basic information and characteristics.</p>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Garden Name -->
                        <div class="lg:col-span-2">
                            <label for="gardenName" class="block text-sm font-medium text-text-primary mb-2">Garden Name *</label>
                            <input type="text" id="gardenName" name="gardenName" required class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-smooth" placeholder="My Backyard Garden" />
                            <div class="error-message hidden text-error text-sm mt-1"></div>
                        </div>

                        <!-- Garden Size -->
                        <div>
                            <label for="gardenSize" class="block text-sm font-medium text-text-primary mb-2">Garden Size (sq ft) *</label>
                            <input type="number" id="gardenSize" name="gardenSize" required min="1" class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-smooth" placeholder="500" />
                            <div class="error-message hidden text-error text-sm mt-1"></div>
                        </div>

                        <!-- Location -->
                        <div>
                            <label for="location" class="block text-sm font-medium text-text-primary mb-2">Location (City, State) *</label>
                            <input type="text" id="location" name="location" required class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-smooth" placeholder="San Francisco, CA" />
                            <div class="error-message hidden text-error text-sm mt-1"></div>
                        </div>

                        <!-- Soil Type -->
                        <div>
                            <label for="soilType" class="block text-sm font-medium text-text-primary mb-2">Soil Type *</label>
                            <select id="soilType" name="soilType" required class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-smooth">
                                <option value>Select soil type</option>
                                <option value="clay">Clay</option>
                                <option value="sandy">Sandy</option>
                                <option value="loam">Loam</option>
                                <option value="silt">Silt</option>
                                <option value="peat">Peat</option>
                                <option value="chalk">Chalk</option>
                            </select>
                            <div class="error-message hidden text-error text-sm mt-1"></div>
                        </div>

                        <!-- Garden Type -->
                        <div>
                            <label for="gardenType" class="block text-sm font-medium text-text-primary mb-2">Garden Type *</label>
                            <select id="gardenType" name="gardenType" required class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-smooth">
                                <option value>Select garden type</option>
                                <option value="vegetable">Vegetable Garden</option>
                                <option value="flower">Flower Garden</option>
                                <option value="herb">Herb Garden</option>
                                <option value="fruit">Fruit Garden</option>
                                <option value="mixed">Mixed Garden</option>
                                <option value="native">Native Plant Garden</option>
                            </select>
                            <div class="error-message hidden text-error text-sm mt-1"></div>
                        </div>

                        <!-- Maintenance Practices -->
                        <div class="lg:col-span-2">
                            <label class="block text-sm font-medium text-text-primary mb-3">Maintenance Practices *</label>
                            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3">
                                <label class="flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-smooth">
                                    <input type="checkbox" name="maintenancePractices" value="organic" class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded" />
                                    <span class="ml-2 text-sm text-text-primary">Organic Methods</span>
                                </label>
                                <label class="flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-smooth">
                                    <input type="checkbox" name="maintenancePractices" value="composting" class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded" />
                                    <span class="ml-2 text-sm text-text-primary">Composting</span>
                                </label>
                                <label class="flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-smooth">
                                    <input type="checkbox" name="maintenancePractices" value="rainwater" class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded" />
                                    <span class="ml-2 text-sm text-text-primary">Rainwater Harvesting</span>
                                </label>
                                <label class="flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-smooth">
                                    <input type="checkbox" name="maintenancePractices" value="mulching" class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded" />
                                    <span class="ml-2 text-sm text-text-primary">Mulching</span>
                                </label>
                                <label class="flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-smooth">
                                    <input type="checkbox" name="maintenancePractices" value="drip-irrigation" class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded" />
                                    <span class="ml-2 text-sm text-text-primary">Drip Irrigation</span>
                                </label>
                                <label class="flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-smooth">
                                    <input type="checkbox" name="maintenancePractices" value="companion-planting" class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded" />
                                    <span class="ml-2 text-sm text-text-primary">Companion Planting</span>
                                </label>
                            </div>
                            <div class="error-message hidden text-error text-sm mt-1"></div>
                        </div>

                        <!-- Description -->
                        <div class="lg:col-span-2">
                            <label for="description" class="block text-sm font-medium text-text-primary mb-2">Garden Description</label>
                            <textarea id="description" name="description" rows="4" class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-smooth resize-none" placeholder="Describe your garden, its purpose, and any special features..."></textarea>
                        </div>
                    </div>

                    <!-- Image Upload Section -->
                    <div class="mt-8">
                        <h3 class="text-lg font-inter font-semibold text-text-primary mb-4">Garden Images *</h3>
                        <div class="border-2 border-dashed border-gray-200 rounded-lg p-8 text-center hover:border-primary transition-smooth" id="imageUploadArea">
                            <svg class="h-12 w-12 text-text-secondary mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                            </svg>
                            <p class="text-lg font-medium text-text-primary mb-2">Drop your garden images here</p>
                            <p class="text-text-secondary mb-4">or click to browse files</p>
                            <input type="file" id="gardenImages" name="gardenImages" multiple accept="image/*" class="hidden" />
                            <button type="button" onclick="document.getElementById('gardenImages').click()" class="bg-primary text-white px-6 py-2 rounded-lg hover:bg-primary-600 transition-smooth">
                                Choose Files
                            </button>
                            <p class="text-xs text-text-secondary mt-2">Maximum 10 images, 5MB each. JPG, PNG, WEBP supported.</p>
                        </div>

                        <!-- Image Preview -->
                        <div id="imagePreview" class="hidden mt-6">
                            <h4 class="text-sm font-medium text-text-primary mb-3">Uploaded Images</h4>
                            <div id="imageGrid" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4"></div>
                        </div>
                        <div class="error-message hidden text-error text-sm mt-1"></div>
                    </div>
                </div>
            </div>

            <!-- Step 2: Tree Information -->
            <div id="step2" class="form-step hidden">
                <div class="bg-surface rounded-2xl shadow-organic p-6 lg:p-8">
                    <div class="mb-8">
                        <h2 class="text-2xl font-inter font-bold text-text-primary mb-2">Tree Information</h2>
                        <p class="text-text-secondary">Add details about the trees in your garden for accurate carbon credit calculation.</p>
                    </div>

                    <div id="treeContainer">
                        <!-- Tree Entry Template -->
                        <div class="tree-entry border border-gray-200 rounded-lg p-6 mb-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-inter font-semibold text-text-primary">Tree Group 1</h3>
                                <button type="button" class="remove-tree-btn hidden text-error hover:text-error-600 transition-smooth">
                                    <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                                    </svg>
                                </button>
                            </div>

                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium text-text-primary mb-2">Tree Species *</label>
                                    <input type="text" name="treeSpecies[]" required class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-smooth" placeholder="Oak, Maple, Pine, etc." />
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-text-primary mb-2">Quantity *</label>
                                    <input type="number" name="treeQuantity[]" required min="1" class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-smooth" placeholder="5" />
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-text-primary mb-2">Average Age (years) *</label>
                                    <input type="number" name="treeAge[]" required min="0" class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-smooth" placeholder="3" />
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-text-primary mb-2">Planting Date</label>
                                    <input type="date" name="treePlantingDate[]" class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-smooth" />
                                </div>

                                <div class="lg:col-span-2">
                                    <label class="block text-sm font-medium text-text-primary mb-2">Additional Notes</label>
                                    <textarea name="treeNotes[]" rows="3" class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-smooth resize-none" placeholder="Any special care, growth conditions, or observations..."></textarea>
                                </div>
                            </div>
                        </div>
                    </div>

                    <button type="button" id="addTreeBtn" class="flex items-center text-primary hover:text-primary-600 transition-smooth">
                        <svg class="h-5 w-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                        </svg>
                        Add Another Tree Group
                    </button>
                </div>
            </div>

            <!-- Step 3: Carbon-Reducing Equipment (Optional) -->
            <div id="step3" class="form-step hidden">
                <div class="bg-surface rounded-2xl shadow-organic p-6 lg:p-8">
                    <div class="mb-8">
                        <h2 class="text-2xl font-inter font-bold text-text-primary mb-2">Carbon-Reducing Equipment</h2>
                        <p class="text-text-secondary">Optional: Add information about any carbon-reducing machines or equipment in your garden.</p>
                    </div>

                    <div class="mb-6">
                        <label class="flex items-center">
                            <input type="checkbox" id="hasEquipment" name="hasEquipment" class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded" />
                            <span class="ml-2 text-sm text-text-primary">I have carbon-reducing equipment in my garden</span>
                        </label>
                    </div>

                    <div id="equipmentSection" class="hidden space-y-6">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div>
                                <label for="equipmentType" class="block text-sm font-medium text-text-primary mb-2">Equipment Type</label>
                                <select id="equipmentType" name="equipmentType" class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-smooth">
                                    <option value>Select equipment type</option>
                                    <option value="solar-panels">Solar Panels</option>
                                    <option value="wind-turbine">Wind Turbine</option>
                                    <option value="biogas-digester">Biogas Digester</option>
                                    <option value="composting-system">Composting System</option>
                                    <option value="rainwater-harvesting">Rainwater Harvesting System</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>

                            <div>
                                <label for="equipmentCapacity" class="block text-sm font-medium text-text-primary mb-2">Capacity/Power Rating</label>
                                <input type="text" id="equipmentCapacity" name="equipmentCapacity" class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-smooth" placeholder="e.g., 5kW, 1000L, etc." />
                            </div>

                            <div>
                                <label for="installationDate" class="block text-sm font-medium text-text-primary mb-2">Installation Date</label>
                                <input type="date" id="installationDate" name="installationDate" class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-smooth" />
                            </div>

                            <div>
                                <label for="manufacturer" class="block text-sm font-medium text-text-primary mb-2">Manufacturer/Brand</label>
                                <input type="text" id="manufacturer" name="manufacturer" class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-smooth" placeholder="Equipment manufacturer" />
                            </div>

                            <div class="lg:col-span-2">
                                <label for="equipmentDescription" class="block text-sm font-medium text-text-primary mb-2">Equipment Description</label>
                                <textarea id="equipmentDescription" name="equipmentDescription" rows="4" class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-smooth resize-none" placeholder="Describe the equipment, its purpose, and how it reduces carbon emissions..."></textarea>
                            </div>
                        </div>

                        <!-- Equipment Documentation Upload -->
                        <div>
                            <h4 class="text-sm font-medium text-text-primary mb-3">Equipment Documentation</h4>
                            <div class="border-2 border-dashed border-gray-200 rounded-lg p-6 text-center hover:border-primary transition-smooth">
                                <svg class="h-8 w-8 text-text-secondary mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                </svg>
                                <p class="text-sm text-text-primary mb-2">Upload specifications, certificates, or photos</p>
                                <input type="file" id="equipmentDocs" name="equipmentDocs" multiple accept=".pdf,.jpg,.jpeg,.png,.doc,.docx" class="hidden" />
                                <button type="button" onclick="document.getElementById('equipmentDocs').click()" class="text-primary hover:text-primary-600 text-sm font-medium">
                                    Choose Files
                                </button>
                                <p class="text-xs text-text-secondary mt-1">PDF, DOC, or image files</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 4: Review -->
            <div id="step4" class="form-step hidden">
                <div class="bg-surface rounded-2xl shadow-organic p-6 lg:p-8">
                    <div class="mb-8">
                        <h2 class="text-2xl font-inter font-bold text-text-primary mb-2">Review Your Submission</h2>
                        <p class="text-text-secondary">Please review all information before submitting your garden for carbon credit verification.</p>
                    </div>

                    <!-- Review Sections -->
                    <div class="space-y-8">
                        <!-- Garden Details Review -->
                        <div class="border border-gray-200 rounded-lg p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-inter font-semibold text-text-primary">Garden Details</h3>
                                <button type="button" class="edit-step-btn text-primary hover:text-primary-600 text-sm font-medium" data-step="1">
                                    Edit
                                </button>
                            </div>
                            <div id="reviewGardenDetails" class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                                <!-- Content will be populated by JavaScript -->
                            </div>
                        </div>

                        <!-- Tree Information Review -->
                        <div class="border border-gray-200 rounded-lg p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-inter font-semibold text-text-primary">Tree Information</h3>
                                <button type="button" class="edit-step-btn text-primary hover:text-primary-600 text-sm font-medium" data-step="2">
                                    Edit
                                </button>
                            </div>
                            <div id="reviewTreeInfo" class="space-y-4">
                                <!-- Content will be populated by JavaScript -->
                            </div>
                        </div>

                        <!-- Equipment Review -->
                        <div class="border border-gray-200 rounded-lg p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-inter font-semibold text-text-primary">Carbon-Reducing Equipment</h3>
                                <button type="button" class="edit-step-btn text-primary hover:text-primary-600 text-sm font-medium" data-step="3">
                                    Edit
                                </button>
                            </div>
                            <div id="reviewEquipment" class="text-sm">
                                <!-- Content will be populated by JavaScript -->
                            </div>
                        </div>

                        <!-- Estimated Carbon Credits -->
                        <div class="bg-primary-50 border border-primary-200 rounded-lg p-6">
                            <h3 class="text-lg font-inter font-semibold text-primary mb-4">Estimated Carbon Credits</h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div class="text-center">
                                    <div class="text-2xl font-bold text-primary" id="estimatedCredits">0</div>
                                    <div class="text-sm text-text-secondary">Credits/Year</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-2xl font-bold text-success" id="estimatedValue">$0</div>
                                    <div class="text-sm text-text-secondary">Estimated Value</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-2xl font-bold text-accent" id="co2Offset">0</div>
                                    <div class="text-sm text-text-secondary">CO₂ Offset (tons)</div>
                                </div>
                            </div>
                        </div>

                        <!-- Terms and Conditions -->
                        <div class="border border-gray-200 rounded-lg p-6">
                            <h3 class="text-lg font-inter font-semibold text-text-primary mb-4">Terms and Conditions</h3>
                            <div class="space-y-4">
                                <label class="flex items-start">
                                    <input type="checkbox" id="agreeTerms" name="agreeTerms" required class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded mt-1" />
                                    <span class="ml-2 text-sm text-text-secondary">
                                        I agree to the <a href="#" class="text-primary hover:text-primary-600">Terms of Service</a> and confirm that all information provided is accurate and truthful.
                                    </span>
                                </label>
                                <label class="flex items-start">
                                    <input type="checkbox" id="agreeVerification" name="agreeVerification" required class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded mt-1" />
                                    <span class="ml-2 text-sm text-text-secondary">
                                        I understand that my garden will undergo verification by certified inspectors before carbon credits are issued.
                                    </span>
                                </label>
                                <label class="flex items-start">
                                    <input type="checkbox" id="agreeUpdates" name="agreeUpdates" class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded mt-1" />
                                    <span class="ml-2 text-sm text-text-secondary">
                                        I agree to receive updates about my submission status and carbon credit marketplace opportunities.
                                    </span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="flex flex-col sm:flex-row justify-between items-center gap-4 pt-8 border-t border-gray-200">
                <div class="flex items-center space-x-4">
                    <button type="button" id="saveDraftBtn" class="px-6 py-2 border border-gray-200 text-text-secondary rounded-lg hover:bg-gray-50 transition-smooth">
                        Save Draft
                    </button>
                    <span class="text-xs text-text-secondary">Auto-saved 2 minutes ago</span>
                </div>

                <div class="flex items-center space-x-4">
                    <button type="button" id="prevBtn" class="hidden px-6 py-2 border border-gray-200 text-text-secondary rounded-lg hover:bg-gray-50 transition-smooth">
                        Previous
                    </button>
                    <button type="button" id="nextBtn" class="px-8 py-3 bg-primary text-white rounded-lg hover:bg-primary-600 transition-smooth">
                        Next Step
                    </button>
                    <button type="submit" id="submitBtn" class="hidden px-8 py-3 bg-success text-white rounded-lg hover:bg-success-600 transition-smooth">
                        Submit Garden
                    </button>
                </div>
            </div>
        </form>
    </main>

    <!-- Footer -->
    <footer class="bg-surface border-t border-gray-100 py-8 mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center text-sm text-text-secondary">
                <p>&copy; 2025 EcoSteps Carbon Platform. All Rights Reserved.</p>
                <div class="mt-2 space-x-4">
                    <a href="#" class="hover:text-primary transition-smooth">Privacy Policy</a>
                    <a href="#" class="hover:text-primary transition-smooth">Terms of Service</a>
                    <a href="#" class="hover:text-primary transition-smooth">Support</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Unsaved Changes Warning Modal -->
    <div id="unsavedChangesModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-surface rounded-2xl shadow-organic-hover max-w-md w-full p-6">
            <div class="flex items-center mb-4">
                <svg class="h-6 w-6 text-warning mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 15.5c-.77.833.192 2.5 1.732 2.5z"/>
                </svg>
                <h3 class="text-lg font-inter font-semibold text-text-primary">Unsaved Changes</h3>
            </div>
            <p class="text-text-secondary mb-6">You have unsaved changes. Are you sure you want to leave this page?</p>
            <div class="flex justify-end space-x-3">
                <button type="button" id="cancelLeave" class="px-4 py-2 border border-gray-200 text-text-secondary rounded-lg hover:bg-gray-50 transition-smooth">
                    Cancel
                </button>
                <button type="button" id="confirmLeave" class="px-4 py-2 bg-error text-white rounded-lg hover:bg-error-600 transition-smooth">
                    Leave Page
                </button>
            </div>
        </div>
    </div>

    <script>
        // Form state management
        let currentStep = 1;
        let formData = {};
        let hasUnsavedChanges = false;
        let treeCount = 1;

        // Initialize form
        document.addEventListener('DOMContentLoaded', function() {
            loadFormData();
            setupEventListeners();
            setupImageUpload();
            setupTreeManagement();
            setupEquipmentToggle();
            updateStepDisplay();
        });

        // Event listeners setup
        function setupEventListeners() {
            // Navigation buttons
            document.getElementById('nextBtn').addEventListener('click', nextStep);
            document.getElementById('prevBtn').addEventListener('click', prevStep);
            document.getElementById('saveDraftBtn').addEventListener('click', saveDraft);
            document.getElementById('gardenSubmissionForm').addEventListener('submit', submitForm);

            // Edit step buttons
            document.querySelectorAll('.edit-step-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const step = parseInt(this.getAttribute('data-step'));
                    goToStep(step);
                });
            });

            // Mobile menu toggle
            document.getElementById('mobileMenuBtn').addEventListener('click', function() {
                const menu = document.getElementById('mobileMenu');
                menu.classList.toggle('hidden');
            });

            // Form change detection
            document.getElementById('gardenSubmissionForm').addEventListener('input', function() {
                hasUnsavedChanges = true;
            });

            // Unsaved changes warning
            window.addEventListener('beforeunload', function(e) {
                if (hasUnsavedChanges) {
                    e.preventDefault();
                    e.returnValue = '';
                }
            });

            // Navigation links warning
            document.querySelectorAll('a[href]').forEach(link => {
                link.addEventListener('click', function(e) {
                    if (hasUnsavedChanges && !this.href.includes('#')) {
                        e.preventDefault();
                        showUnsavedChangesModal(this.href);
                    }
                });
            });

            // Modal handlers
            document.getElementById('cancelLeave').addEventListener('click', hideUnsavedChangesModal);
            document.getElementById('confirmLeave').addEventListener('click', function() {
                hasUnsavedChanges = false;
                window.location.href = document.getElementById('confirmLeave').dataset.href;
            });
        }

        // Image upload functionality
        function setupImageUpload() {
            const uploadArea = document.getElementById('imageUploadArea');
            const fileInput = document.getElementById('gardenImages');
            const imagePreview = document.getElementById('imagePreview');
            const imageGrid = document.getElementById('imageGrid');

            // Drag and drop
            uploadArea.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.classList.add('border-primary', 'bg-primary-50');
            });

            uploadArea.addEventListener('dragleave', function(e) {
                e.preventDefault();
                this.classList.remove('border-primary', 'bg-primary-50');
            });

            uploadArea.addEventListener('drop', function(e) {
                e.preventDefault();
                this.classList.remove('border-primary', 'bg-primary-50');
                const files = e.dataTransfer.files;
                handleImageFiles(files);
            });

            // File input change
            fileInput.addEventListener('change', function() {
                handleImageFiles(this.files);
            });

            function handleImageFiles(files) {
                if (files.length > 10) {
                    alert('Maximum 10 images allowed');
                    return;
                }

                imageGrid.innerHTML = '';
                imagePreview.classList.remove('hidden');

                Array.from(files).forEach((file, index) => {
                    if (file.size > 5 * 1024 * 1024) {
                        alert(`File ${file.name} is too large. Maximum 5MB allowed.`);
                        return;
                    }

                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const imageContainer = document.createElement('div');
                        imageContainer.className = 'relative group';
                        imageContainer.innerHTML = `
                            <img src="${e.target.result}" alt="Garden image ${index + 1}" class="w-full h-24 object-cover rounded-lg">
                            <button type="button" class="absolute top-1 right-1 bg-error text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-smooth" onclick="removeImage(this)">
                                <svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                                </svg>
                            </button>
                        `;
                        imageGrid.appendChild(imageContainer);
                    };
                    reader.readAsDataURL(file);
                });
            }
        }

        // Tree management
        function setupTreeManagement() {
            document.getElementById('addTreeBtn').addEventListener('click', addTreeEntry);
        }

        function addTreeEntry() {
            treeCount++;
            const container = document.getElementById('treeContainer');
            const newEntry = document.createElement('div');
            newEntry.className = 'tree-entry border border-gray-200 rounded-lg p-6 mb-6';
            newEntry.innerHTML = `
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-inter font-semibold text-text-primary">Tree Group ${treeCount}</h3>
                    <button type="button" class="remove-tree-btn text-error hover:text-error-600 transition-smooth" onclick="removeTreeEntry(this)">
                        <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                        </svg>
                    </button>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-text-primary mb-2">Tree Species *</label>
                        <input type="text" name="treeSpecies[]" required class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-smooth" placeholder="Oak, Maple, Pine, etc.">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-text-primary mb-2">Quantity *</label>
                        <input type="number" name="treeQuantity[]" required min="1" class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-smooth" placeholder="5">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-text-primary mb-2">Average Age (years) *</label>
                        <input type="number" name="treeAge[]" required min="0" class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-smooth" placeholder="3">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-text-primary mb-2">Planting Date</label>
                        <input type="date" name="treePlantingDate[]" class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-smooth">
                    </div>
                    <div class="lg:col-span-2">
                        <label class="block text-sm font-medium text-text-primary mb-2">Additional Notes</label>
                        <textarea name="treeNotes[]" rows="3" class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-smooth resize-none" placeholder="Any special care, growth conditions, or observations..."></textarea>
                    </div>
                </div>
            `;
            container.appendChild(newEntry);

            // Show remove buttons if more than one entry
            updateRemoveButtons();
        }

        function removeTreeEntry(button) {
            button.closest('.tree-entry').remove();
            updateRemoveButtons();
            renumberTreeEntries();
        }

        function updateRemoveButtons() {
            const entries = document.querySelectorAll('.tree-entry');
            const removeButtons = document.querySelectorAll('.remove-tree-btn');
            
            removeButtons.forEach(btn => {
                btn.classList.toggle('hidden', entries.length <= 1);
            });
        }

        function renumberTreeEntries() {
            const entries = document.querySelectorAll('.tree-entry');
            entries.forEach((entry, index) => {
                const title = entry.querySelector('h3');
                title.textContent = `Tree Group ${index + 1}`;
            });
            treeCount = entries.length;
        }

        // Equipment toggle
        function setupEquipmentToggle() {
            const checkbox = document.getElementById('hasEquipment');
            const section = document.getElementById('equipmentSection');
            
            checkbox.addEventListener('change', function() {
                if (this.checked) {
                    section.classList.remove('hidden');
                } else {
                    section.classList.add('hidden');
                }
            });
        }

        // Step navigation
        function nextStep() {
            if (validateCurrentStep()) {
                saveCurrentStepData();
                if (currentStep < 4) {
                    currentStep++;
                    updateStepDisplay();
                }
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                updateStepDisplay();
            }
        }

        function goToStep(step) {
            if (step >= 1 && step <= 4) {
                currentStep = step;
                updateStepDisplay();
            }
        }

        function updateStepDisplay() {
            // Hide all steps
            document.querySelectorAll('.form-step').forEach(step => {
                step.classList.add('hidden');
            });

            // Show current step
            document.getElementById(`step${currentStep}`).classList.remove('hidden');

            // Update progress
            document.getElementById('currentStep').textContent = currentStep;
            document.getElementById('progressBar').style.width = `${(currentStep / 4) * 100}%`;

            // Update step labels
            document.querySelectorAll('.step-label').forEach((label, index) => {
                label.classList.toggle('active', index + 1 <= currentStep);
                if (index + 1 <= currentStep) {
                    label.classList.add('text-primary', 'font-medium');
                    label.classList.remove('text-text-secondary');
                } else {
                    label.classList.remove('text-primary', 'font-medium');
                    label.classList.add('text-text-secondary');
                }
            });

            // Update navigation buttons
            document.getElementById('prevBtn').classList.toggle('hidden', currentStep === 1);
            document.getElementById('nextBtn').classList.toggle('hidden', currentStep === 4);
            document.getElementById('submitBtn').classList.toggle('hidden', currentStep !== 4);

            // Update review section if on step 4
            if (currentStep === 4) {
                updateReviewSection();
            }
        }

        // Validation
        function validateCurrentStep() {
            const currentStepElement = document.getElementById(`step${currentStep}`);
            const requiredFields = currentStepElement.querySelectorAll('[required]');
            let isValid = true;

            // Clear previous errors
            currentStepElement.querySelectorAll('.error-message').forEach(error => {
                error.classList.add('hidden');
                error.textContent = '';
            });

            // Validate required fields
            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    showFieldError(field, 'This field is required');
                    isValid = false;
                }
            });

            // Step-specific validation
            if (currentStep === 1) {
                // Validate maintenance practices
                const practices = currentStepElement.querySelectorAll('input[name="maintenancePractices"]:checked');
                if (practices.length === 0) {
                    showFieldError(currentStepElement.querySelector('input[name="maintenancePractices"]'), 'Please select at least one maintenance practice');
                    isValid = false;
                }

                // Validate images
                const images = document.getElementById('gardenImages').files;
                if (images.length === 0) {
                    showFieldError(document.getElementById('gardenImages'), 'Please upload at least one garden image');
                    isValid = false;
                }
            }

            return isValid;
        }

        function showFieldError(field, message) {
            const errorElement = field.closest('div').querySelector('.error-message') || 
                                field.parentElement.querySelector('.error-message');
            if (errorElement) {
                errorElement.textContent = message;
                errorElement.classList.remove('hidden');
            }
            field.classList.add('border-error');
            field.focus();
        }

        // Data management
        function saveCurrentStepData() {
            const currentStepElement = document.getElementById(`step${currentStep}`);
            const formData = new FormData(document.getElementById('gardenSubmissionForm'));
            
            // Save to localStorage
            const data = {};
            for (let [key, value] of formData.entries()) {
                if (data[key]) {
                    if (Array.isArray(data[key])) {
                        data[key].push(value);
                    } else {
                        data[key] = [data[key], value];
                    }
                } else {
                    data[key] = value;
                }
            }
            
            localStorage.setItem('gardenSubmissionData', JSON.stringify(data));
        }

        function loadFormData() {
            const savedData = localStorage.getItem('gardenSubmissionData');
            if (savedData) {
                const data = JSON.parse(savedData);
                // Populate form fields with saved data
                Object.keys(data).forEach(key => {
                    const field = document.querySelector(`[name="${key}"]`);
                    if (field) {
                        if (field.type === 'checkbox' || field.type === 'radio') {
                            field.checked = data[key] === field.value;
                        } else {
                            field.value = data[key];
                        }
                    }
                });
            }
        }

        function saveDraft() {
            saveCurrentStepData();
            hasUnsavedChanges = false;
            
            // Show success message
            const btn = document.getElementById('saveDraftBtn');
            const originalText = btn.textContent;
            btn.textContent = 'Saved!';
            btn.classList.add('text-success');
            
            setTimeout(() => {
                btn.textContent = originalText;
                btn.classList.remove('text-success');
            }, 2000);
        }

        // Review section
        function updateReviewSection() {
            updateGardenDetailsReview();
            updateTreeInfoReview();
            updateEquipmentReview();
            calculateEstimatedCredits();
        }

        function updateGardenDetailsReview() {
            const container = document.getElementById('reviewGardenDetails');
            const formData = new FormData(document.getElementById('gardenSubmissionForm'));
            
            container.innerHTML = `
                <div><strong>Garden Name:</strong> ${formData.get('gardenName') || 'Not specified'}</div>
                <div><strong>Size:</strong> ${formData.get('gardenSize') || 'Not specified'} sq ft</div>
                <div><strong>Location:</strong> ${formData.get('location') || 'Not specified'}</div>
                <div><strong>Soil Type:</strong> ${formData.get('soilType') || 'Not specified'}</div>
                <div><strong>Garden Type:</strong> ${formData.get('gardenType') || 'Not specified'}</div>
                <div class="md:col-span-2"><strong>Description:</strong> ${formData.get('description') || 'No description provided'}</div>
            `;
        }

        function updateTreeInfoReview() {
            const container = document.getElementById('reviewTreeInfo');
            const species = document.querySelectorAll('input[name="treeSpecies[]"]');
            
            if (species.length === 0) {
                container.innerHTML = '<div class="text-text-secondary">No tree information provided</div>';
                return;
            }

            let html = '';
            species.forEach((input, index) => {
                const quantity = document.querySelectorAll('input[name="treeQuantity[]"]')[index]?.value || '';
                const age = document.querySelectorAll('input[name="treeAge[]"]')[index]?.value || '';
                
                html += `
                    <div class="border border-gray-100 rounded-lg p-4">
                        <div class="font-medium text-text-primary">Tree Group ${index + 1}</div>
                        <div class="text-sm text-text-secondary mt-1">
                            <div><strong>Species:</strong> ${input.value || 'Not specified'}</div>
                            <div><strong>Quantity:</strong> ${quantity || 'Not specified'}</div>
                            <div><strong>Age:</strong> ${age || 'Not specified'} years</div>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function updateEquipmentReview() {
            const container = document.getElementById('reviewEquipment');
            const hasEquipment = document.getElementById('hasEquipment').checked;
            
            if (!hasEquipment) {
                container.innerHTML = '<div class="text-text-secondary">No carbon-reducing equipment specified</div>';
                return;
            }

            const equipmentType = document.getElementById('equipmentType').value;
            const capacity = document.getElementById('equipmentCapacity').value;
            
            container.innerHTML = `
                <div><strong>Equipment Type:</strong> ${equipmentType || 'Not specified'}</div>
                <div><strong>Capacity:</strong> ${capacity || 'Not specified'}</div>
            `;
        }

        function calculateEstimatedCredits() {
            // Simple calculation based on garden size and trees
            const gardenSize = parseInt(document.getElementById('gardenSize').value) || 0;
            const treeEntries = document.querySelectorAll('.tree-entry');
            
            let totalTrees = 0;
            treeEntries.forEach(entry => {
                const quantity = parseInt(entry.querySelector('input[name="treeQuantity[]"]').value) || 0;
                totalTrees += quantity;
            });

            // Basic calculation: 0.1 credits per 100 sq ft + 0.5 credits per tree
            const estimatedCredits = Math.round((gardenSize / 100) * 0.1 + totalTrees * 0.5);
            const estimatedValue = estimatedCredits * 25; // $25 per credit
            const co2Offset = (estimatedCredits * 1.2).toFixed(1); // 1.2 tons CO2 per credit

            document.getElementById('estimatedCredits').textContent = estimatedCredits;
            document.getElementById('estimatedValue').textContent = `$${estimatedValue}`;
            document.getElementById('co2Offset').textContent = co2Offset;
        }

        // Form submission
        function submitForm(e) {
            e.preventDefault();
            
            if (!validateCurrentStep()) {
                return;
            }

            // Check terms agreement
            if (!document.getElementById('agreeTerms').checked || !document.getElementById('agreeVerification').checked) {
                alert('Please agree to the terms and conditions before submitting.');
                return;
            }

            // Simulate submission
            const submitBtn = document.getElementById('submitBtn');
            submitBtn.disabled = true;
            submitBtn.innerHTML = `
                <svg class="animate-spin h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                Submitting...
            `;

            setTimeout(() => {
                hasUnsavedChanges = false;
                localStorage.removeItem('gardenSubmissionData');
                alert('Garden submitted successfully! You will receive a confirmation email shortly.');
                window.location.href = 'garden_owner_dashboard.html';
            }, 2000);
        }

        // Utility functions
        function removeImage(button) {
            button.parentElement.remove();
            const grid = document.getElementById('imageGrid');
            if (grid.children.length === 0) {
                document.getElementById('imagePreview').classList.add('hidden');
            }
        }

        function showUnsavedChangesModal(href) {
            document.getElementById('confirmLeave').dataset.href = href;
            document.getElementById('unsavedChangesModal').classList.remove('hidden');
        }

        function hideUnsavedChangesModal() {
            document.getElementById('unsavedChangesModal').classList.add('hidden');
        }
    </script>
</body>
</html>